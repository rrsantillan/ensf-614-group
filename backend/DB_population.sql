DROP DATABASE IF EXISTS ensf_614;
CREATE DATABASE ensf_614;
USE ensf_614;

DROP TABLE IF EXISTS tblUser;
CREATE TABLE tblUser (
	USERID 			INT AUTO_INCREMENT PRIMARY KEY,
	USERNAME			VARCHAR(25) NOT null,
	PASSWORD			VARCHAR(25) NOT null,
	PROFILE 			VARCHAR(25) NOT NULL,
	EMAIL				VARCHAR(25) NOT NULL,
	YEARLYPROMO 	BOOLEAN		
);


DROP TABLE IF EXISTS tblAirplane;
CREATE TABLE tblAirplane (
	AIRPLANEID 		INT AUTO_INCREMENT PRIMARY KEY,
	MODEL 			VARCHAR(25) NOT NULL
);

DROP TABLE IF EXISTS tblSeatMap;
CREATE TABLE tblSeatMap(
	AIRPLANEID 		INT NOT NULL,
	CLASS				INT,
	ROWCNT 			INT NOT NULL,
	COLCNT			INT NOT NULL,
	FOREIGN KEY (AIRPLANEID) REFERENCES tblAirplane(AIRPLANEID)
);
	
DROP TABLE IF EXISTS tblFlight;
CREATE TABLE tblFlight (    
	FLIGHTID			INT AUTO_INCREMENT PRIMARY KEY,
	AIRPLANEID 		INT NOT NULL,
	ORIGIN			varchar(25) NOT null,
	DESTINATION	 	varchar(25) NOT null,
	DEPARTURETIME	TIMESTAMP,
	ARRIVALTIME		TIMESTAMP,				
	FOREIGN KEY (AIRPLANEID) REFERENCES tblAirplane(AIRPLANEID)
);

DROP TABLE IF EXISTS tblTickets; 
CREATE TABLE tblTickets (
	TICKEDID       INT AUTO_INCREMENT PRIMARY KEY,
	USERNAME			varchar(25) NOT null,
	FLIGHTID			INT,
	SEATNUMBER		varchar(25) NOT null,
	SEATTYPE			INT,
	PRICE 			FLOAT NOT NULL, 
	INSURANCE 		VARCHAR(25) Not NULL,
	FOREIGN KEY (FLIGHTID) REFERENCES tblFlight(FLIGHTID)
);

DROP TABLE IF EXISTS tblSeatSelection;
CREATE TABLE tblSeatSelection (
	SEATSTYLE 		INT AUTO_INCREMENT PRIMARY KEY, 
	COMFORTLEVEL	VARCHAR(25) NOT NULL,
	CLASS 			VARCHAR(25) NOT NULL
);
	

DROP TABLE IF EXISTS tblCrew; 
CREATE TABLE tblCrew (
	CREWID	   	INT AUTO_INCREMENT PRIMARY KEY,
	FNAME				VARCHAR(25) NOT NULL,
	LASTNAME			VARCHAR(25) NOT NULL,
	POSITION			VARCHAR(25) NOT NULL
);

DROP TABLE IF EXISTS tblAassignedCrew; 
CREATE TABLE tblAassignedCrew (
	CREWID 			INT,		
	FLIGHTID			varchar(25) NOT NULL,
	FOREIGN KEY (CREWID) REFERENCES tblCrew(CREWID)
);





INSERT INTO tblUser (USERID, USERNAME, PASSWORD, PROFILE, EMAIL, YEARLYPROMO)
VALUES
(1, 'Kate', 'Stevens', 'AGENT', 'braden@gmail.com', 0),
(2, 'Jack', 'fred', 'ADMIN', 'fred@gmail.com', 1),
(3, 'James', 'bob', 'REGUSER', 'bob@gmail.com', 1);


INSERT INTO tblAirplane (AIRPLANEID, MODEL)
VALUES
(1, 'BOEING 747'),
(2, 'BOEING 777'),
(3, 'AIRBUS a320');


INSERT INTO tblSeatMap(AIRPLANEID, CLASS, ROWCNT, COLCNT)
VALUES 
(1, 1, 3, 4),
(1, 2, 20, 4),
(2, 1, 4, 4),
(2, 2, 30, 4),
(3, 1, 5, 6),
(3, 2, 40, 6);

INSERT INTO tblFlight (FLIGHTID, AIRPLANEID, ORIGIN, DESTINATION, DEPARTURETIME, ARRIVALTIME)
VALUES	
(1, 1, 'YYC', 'YVR',	'2023-11-12', '2023-11-13'),
(2, 2, 'YYC', 'YVR',	'2023-11-12', '2023-11-14'),
(3, 1, 'YYC', 'YVR',	'2023-11-13', '2023-11-16');

INSERT INTO tblTickket (TICKETID, USERNAME, FLIGHTID, SEATNUMBER, SEATTYPE, PRICE, INSURANCE)
VALUES
(1, 'Kate', 1, 'A1', 1, '400', 'Yes'),
(2, 'Jack', 1, 'B1', 2, '300', 'Yes'),
(3, 'James', 2, 'A3', 2, '300', 'Yes'),
(4, 'Guest', 3, 'C1', 3, '200', 'No'),
(5, 'Guest', 2, 'D4', 4, '100', 'No');


INSERT INTO tblCrew(CREWID, FNAME, LASTNAME, POSITION)
VALUES
(1, 'Frank', 'Bird', 'PILOT'),
(2, 'Greg', 'Bird', 'ATTENDANT'),
(3, 'Jon', 'Smith', 'ATTENDANT'),
(4, 'Nancy', 'Drew', 'PILOT'),
(5, 'Bob', 'Tim', 'ATTENDANT');

INSERT INTO tblAssignedCrew(FLIGHTID, CREWID)
VALUES
(1, 1),
(1, 2);

INSERT INTO tblSeatSelection (SEATSTYLE, COMFORTLEVEL , CLASS)
VALUES
(1, 'Ordinary', 'Bussniess')
(2, 'Ordinary', 'Economy')
(3, 'Comfort', 'Bussniess')
(4, 'Comfort', 'Economy');
 




